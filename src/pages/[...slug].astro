---
import Layout from "../layouts/Layout.astro";
import { getCollection, render } from "astro:content";
import { SITE } from "../config";

export async function getStaticPaths() {
    const pages = await getCollection("pages");
    return pages.map((page) => ({
        params: { slug: page.id.replace(/\.(md|mdx)$/, "") },
        props: { page },
    }));
}

const { page } = Astro.props;
const { Content } = await render(page);
---

<Layout
    title={`${page.data.title} - ${SITE.title}`}
    description={page.data.description}
>
    <article class="prose prose-lg dark:prose-invert max-w-none">
        <Content />
    </article>
</Layout>
